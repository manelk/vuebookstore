{"remainingRequest":"C:\\Users\\manelk\\Desktop\\bookstore\\bookwebsite\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\manelk\\Desktop\\bookstore\\bookwebsite\\src\\api\\auth.service.js","dependencies":[{"path":"C:\\Users\\manelk\\Desktop\\bookstore\\bookwebsite\\src\\api\\auth.service.js","mtime":1635347021791},{"path":"C:\\Users\\manelk\\Desktop\\bookstore\\bookwebsite\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\manelk\\Desktop\\bookstore\\bookwebsite\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIkM6L1VzZXJzL21hbmVsay9EZXNrdG9wL2Jvb2tzdG9yZS9ib29rd2Vic2l0ZS9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vYXN5bmNUb0dlbmVyYXRvciI7CmltcG9ydCAicmVnZW5lcmF0b3ItcnVudGltZS9ydW50aW1lLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyI7CmltcG9ydCBheGlvcyBmcm9tICdheGlvcyc7CmltcG9ydCBjb25maWcgZnJvbSAnLi4vY29uZmlnL2Rldi5qc29uJzsKdmFyIHBhdGggPSAnL2FwaSc7CnZhciBBVVRIX1VSTCA9ICJodHRwOi8vbG9jYWxob3N0OjMwMDAvYXBpL2F1dGgiOyAvL2xldCB1c2VyX3VybCA9IGNvbmZpZy5ob3N0ICsgcGF0aCArICIvdXNlciI7Ci8vIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViA9PT0gJ3Byb2R1Y3Rpb24nKSB7Ci8vICAgICB1cmwgPSBjb25maWcuaG9zdCArIHBhdGgKLy8gICAgIC8vdXJsU2VjdXJlID0gY29uZmlnLmhvc3QgKyBwYXRoICsgJy9zZWN1cmUnCi8vIH0KCmV4cG9ydCBmdW5jdGlvbiBMb2dpbihfeCkgewogIHJldHVybiBfTG9naW4uYXBwbHkodGhpcywgYXJndW1lbnRzKTsKfSAvLyBleHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0SW5mb0J5VG9rZW4odG9rZW4pIHsKLy8gICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7Ci8vICAgICAgICAgdG9rZW5IZWFkZXIodG9rZW4pCi8vICAgICAgICAgYXhpb3MKLy8gICAgICAgICAgICAgLmdldChBVVRIX1VSTCArICIvZ2V0SW5mb0J5VG9rZW4iKQovLyAgICAgICAgICAgICAudGhlbigocmVzKSA9PiB7Ci8vICAgICAgICAgICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgidG9rZW4iLCB0b2tlbik7Ci8vICAgICAgICAgICAgICAgICByZXNvbHZlKHJlcy5kYXRhWzBdKQovLyAgICAgICAgICAgICB9KS5jYXRjaChlcnJvciA9PiB7Ci8vICAgICAgICAgICAgICAgICByZWplY3QoZXJyb3IpCi8vICAgICAgICAgICAgIH0pCi8vICAgICB9KQovLyB9CgpmdW5jdGlvbiBfTG9naW4oKSB7CiAgX0xvZ2luID0gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlKHVzZXIpIHsKICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlJChfY29udGV4dCkgewogICAgICB3aGlsZSAoMSkgewogICAgICAgIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHsKICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LmFicnVwdCgicmV0dXJuIiwgbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkgewogICAgICAgICAgICAgIGF4aW9zLnBvc3QoQVVUSF9VUkwgKyAiL2xvZ2luIiwgewogICAgICAgICAgICAgICAgZW1haWw6IHVzZXIuZW1haWwsCiAgICAgICAgICAgICAgICBwYXNzd29yZDogdXNlci5wYXNzd29yZAogICAgICAgICAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgICAgICAgICAgaWYgKHJlcykgewogICAgICAgICAgICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgidG9rZW4iLCByZXMuZGF0YS50b2tlbik7CiAgICAgICAgICAgICAgICAgIHJlc29sdmUocmVzLmRhdGEudXNlcik7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycm9yKSB7CiAgICAgICAgICAgICAgICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbSgndG9rZW4nKTsKICAgICAgICAgICAgICAgIHJlamVjdChlcnJvcik7CiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0pKTsKCiAgICAgICAgICBjYXNlIDE6CiAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpOwogICAgICAgIH0KICAgICAgfQogICAgfSwgX2NhbGxlZSk7CiAgfSkpOwogIHJldHVybiBfTG9naW4uYXBwbHkodGhpcywgYXJndW1lbnRzKTsKfQoKZXhwb3J0IGZ1bmN0aW9uIHRva2VuSGVhZGVyKF94MikgewogIHJldHVybiBfdG9rZW5IZWFkZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKfQoKZnVuY3Rpb24gX3Rva2VuSGVhZGVyKCkgewogIF90b2tlbkhlYWRlciA9IF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTIodG9rZW4pIHsKICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMiQoX2NvbnRleHQyKSB7CiAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgc3dpdGNoIChfY29udGV4dDIucHJldiA9IF9jb250ZXh0Mi5uZXh0KSB7CiAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgIGF4aW9zLmRlZmF1bHRzLmhlYWRlcnNbJ0F1dGhvcml6YXRpb24nXSA9ICdCZWFyZXIgJyArIHRva2VuOwoKICAgICAgICAgIGNhc2UgMToKICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgIHJldHVybiBfY29udGV4dDIuc3RvcCgpOwogICAgICAgIH0KICAgICAgfQogICAgfSwgX2NhbGxlZTIpOwogIH0pKTsKICByZXR1cm4gX3Rva2VuSGVhZGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7Cn0="},{"version":3,"sources":["C:/Users/manelk/Desktop/bookstore/bookwebsite/src/api/auth.service.js"],"names":["axios","config","path","AUTH_URL","Login","user","Promise","resolve","reject","post","email","password","then","res","localStorage","setItem","data","token","catch","error","removeItem","tokenHeader","defaults","headers"],"mappings":";;;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,MAAP,MAAmB,oBAAnB;AAEA,IAAIC,IAAI,GAAG,MAAX;AACA,IAAIC,QAAQ,GAAG,gCAAf,C,CACA;AAEA;AACA;AACA;AACA;;AAEA,gBAAsBC,KAAtB;AAAA;AAAA,C,CAmBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;mEA/BO,iBAAqBC,IAArB;AAAA;AAAA;AAAA;AAAA;AAAA,6CACI,IAAIC,OAAJ,CAAY,UAACC,OAAD,EAAUC,MAAV,EAAqB;AACpCR,cAAAA,KAAK,CACAS,IADL,CACUN,QAAQ,GAAG,QADrB,EAC+B;AACvBO,gBAAAA,KAAK,EAAEL,IAAI,CAACK,KADW;AAEvBC,gBAAAA,QAAQ,EAAEN,IAAI,CAACM;AAFQ,eAD/B,EAKKC,IALL,CAKU,UAACC,GAAD,EAAS;AACX,oBAAIA,GAAJ,EAAS;AACLC,kBAAAA,YAAY,CAACC,OAAb,CAAqB,OAArB,EAA8BF,GAAG,CAACG,IAAJ,CAASC,KAAvC;AACAV,kBAAAA,OAAO,CAACM,GAAG,CAACG,IAAJ,CAASX,IAAV,CAAP;AACH;AAEJ,eAXL,EAWOa,KAXP,CAWa,UAAAC,KAAK,EAAI;AACdL,gBAAAA,YAAY,CAACM,UAAb,CAAwB,OAAxB;AACAZ,gBAAAA,MAAM,CAACW,KAAD,CAAN;AACH,eAdL;AAeH,aAhBM,CADJ;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,G;;;;AAiCP,gBAAsBE,WAAtB;AAAA;AAAA;;;yEAAO,kBAA2BJ,KAA3B;AAAA;AAAA;AAAA;AAAA;AACHjB,YAAAA,KAAK,CAACsB,QAAN,CAAeC,OAAf,CAAuB,eAAvB,IAA0C,YAAYN,KAAtD;;AADG;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,G","sourcesContent":["import axios from 'axios';\r\nimport config from '../config/dev.json';\r\n\r\nlet path = '/api'\r\nlet AUTH_URL = \"http://localhost:3000/api/auth\";\r\n//let user_url = config.host + path + \"/user\";\r\n\r\n// if (process.env.NODE_ENV === 'production') {\r\n//     url = config.host + path\r\n//     //urlSecure = config.host + path + '/secure'\r\n// }\r\n\r\nexport async function Login(user) {\r\n    return new Promise((resolve, reject) => {\r\n        axios\r\n            .post(AUTH_URL + \"/login\", {\r\n                email: user.email,\r\n                password: user.password,\r\n            })\r\n            .then((res) => {\r\n                if (res) {\r\n                    localStorage.setItem(\"token\", res.data.token);\r\n                    resolve(res.data.user)\r\n                }\r\n\r\n            }).catch(error => {\r\n                localStorage.removeItem('token')\r\n                reject(error)\r\n            })\r\n    })\r\n}\r\n// export async function getInfoByToken(token) {\r\n//     return new Promise((resolve, reject) => {\r\n//         tokenHeader(token)\r\n//         axios\r\n//             .get(AUTH_URL + \"/getInfoByToken\")\r\n//             .then((res) => {\r\n//                 localStorage.setItem(\"token\", token);\r\n//                 resolve(res.data[0])\r\n//             }).catch(error => {\r\n//                 reject(error)\r\n//             })\r\n//     })\r\n// }\r\n\r\nexport async function tokenHeader(token) {\r\n    axios.defaults.headers['Authorization'] = 'Bearer ' + token\r\n}"]}]}